<html>
<head>
  <meta charset="utf-8">
  <title>HelloSports.live Player</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer">

  <!-- ✅ Shaka Player -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.6/shaka-player.ui.min.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.6/controls.min.css" crossorigin="anonymous" />

  <style>
    html, body {
      margin: 0;
      padding: 0;
      background-color: black;
      height: 100%;
      overflow: hidden;
    }

    /* ✅ Watermark */
    .watermark-link {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 9999;
      background: #D50000;
      color: white;
      padding: 6px 12px;
      font-size: 14px;
      font-weight: bold;
      border-radius: 4px;
      text-decoration: none;
      font-family: sans-serif;
      animation: pulse 2.5s infinite ease-in-out;
    }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
    .watermark-link:hover { background: #FF1744; }

    /* ✅ Custom Shaka Styles */
    .shaka-spinner-container { display: none !important; }
    .video-fill video { object-fit: cover; }

    .shaka-overflow-menu {
      background-color: rgb(35, 35, 35);
      color: rgb(255, 255, 255);
    }
    .shaka-overflow-menu button:hover { background-color: rgb(45, 45, 45); }
    .shaka-overflow-button-label { color: rgb(245, 245, 245); }
    .shaka-current-selection-span { color: rgb(202, 202, 202); }
    .material-icons-round { color: rgb(230, 230, 230); }

    .shaka-settings-menu {
      background-color: rgb(35, 35, 35);
      color: rgb(255, 255, 255);
    }
    .shaka-settings-menu button { color: rgb(255, 255, 255); }
    .shaka-settings-menu button:hover { background-color: rgb(45, 45, 45); }

    .shaka-bottom-controls {
      display: flex;
      flex-direction: column-reverse; /* seekbar on top */
    }
  </style>
</head>
  
<body bgcolor="black" style="margin:0" oncontextmenu="return false" onkeydown="return false" onmousedown="return false">
  <!-- ✅ Watermark -->
  <a href="https://www.hellosports.live" target="_blank" class="watermark-link">HelloSports.live</a>

  <!-- ✅ Player -->
  <div data-shaka-player-container style="width:100%;height:100%;position:relative;">
    <video
      id="video"
      autoplay
      muted
      playsinline
      preload="auto"
      poster="https://i.ibb.co/DfgHg3F5/black-l-ight-blue-modern-gaming-live-streaming-youtube-thumbnail.png"
      data-shaka-player
      style="width:100%;height:100%;">
    </video>
  </div>

  <script>
    (async function () {
      const videoConfigs = [
        {
          id: "default",
          manifestUri: "https://abf3vkvaaaaaaaamlc5jpiwqulzmj.otte.live.cf.ww.aiv-cdn.net/lhr-nitro/live/clients/dash/enc/rusnucsbd0/out/v1/6a6661b03261495a85b2f9dd99e4ddd4/cenc.mpd",
          drmConfig: {
            clearKeys: {
              '2684bed935bc5d3aa976a27c459be28f': '3a15d5d9b270d04f4c327d2b5b105ab3'
            }
          }
        }
      ];

      function getQueryParameter(name) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(name);
      }

      async function init() {
        const id = getQueryParameter('id') || "default";
        const config = videoConfigs.find(cfg => cfg.id === id);
        if (!config) {
          console.error("❌ No config found for", id);
          return;
        }

        const video = document.getElementById("video");
        const ui = video["ui"];
        ui.configure({
          seekBarColors: {
            base: "rgba(255,255,255,.2)",
            buffered: "rgba(255,255,255,.4)",
            played: "rgb(255,0,0)",
          }
        });

        const controls = ui.getControls();
        const player = controls.getPlayer();

        // ✅ Fast start config
        player.configure({
          drm: config.drmConfig,
          streaming: {
            bufferingGoal: 5,
            rebufferingGoal: 1.5,
            startupThreshold: 1
          }
        });

        try {
          const loadPromise = player.load(config.manifestUri);
          video.muted = true;
          const playPromise = video.play().catch(()=>{});
          await Promise.all([loadPromise, playPromise]); 
          console.log("✅ Stream started quickly!");
        } catch (error) {
          console.error("❌ Error loading video:", error);
        }

        // ✅ Replace menu labels/icons
        document.querySelectorAll(".shaka-overflow-menu-button").forEach(btn => {
          btn.textContent = "settings";
        });
        document.querySelectorAll(".shaka-back-to-overflow-button .material-icons-round").forEach(icon => {
          icon.textContent = "arrow_back_ios_new";
        });
      }

      document.addEventListener("shaka-ui-loaded", init);
    })();
  </script>
</body>
</html>
